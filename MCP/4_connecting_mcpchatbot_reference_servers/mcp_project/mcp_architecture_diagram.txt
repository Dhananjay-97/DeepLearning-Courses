```
+-----------------------------------------------------------------------------------------------------+
|                           MODEL CONTEXT PROTOCOL (MCP) ARCHITECTURE                                 |
+-----------------------------------------------------------------------------------------------------+

+---------------------+                 JSON-RPC 2.0                  +---------------------+
|                     |                Communication                  |                     |
|       HOST          |<------------------------------------------>  |      SERVER         |
| (LLM Application)   |                                              | (Context Provider)  |
|                     |                                              |                     |
+----------+----------+                                              +----------+----------+
           |                                                                    |
           |                                                                    |
           v                                                                    v
+----------+----------+                                              +----------+----------+
|                     |                                              |                     |
|       CLIENT        |<------------------------------------------>  |    SERVER LOGIC     |
|                     |                                              |                     |
+----------+----------+                                              +----------+----------+
           |                                                                    |
           |                                                                    |
           v                                                                    v
+----------+----------+                                              +----------+----------+
|   PROTOCOL LAYER    |                                              |   PROTOCOL LAYER    |
|                     |                                              |                     |
| - Request handling  |                                              | - Request handling  |
| - Notification      |                                              | - Notification      |
| - Message framing   |                                              | - Message framing   |
+----------+----------+                                              +----------+----------+
           |                                                                    |
           |                                                                    |
           v                                                                    v
+----------+----------+                                              +----------+----------+
|   TRANSPORT LAYER   |                                              |   TRANSPORT LAYER   |
|                     |                                              |                     |
| - Stdio Transport   |<------------------------------------------>  | - Stdio Transport   |
| - HTTP/SSE Transport|                                              | - HTTP/SSE Transport|
+---------------------+                                              +---------------------+

+-----------------------------------------------------------------------------------------------------+
|                                    MESSAGE TYPES                                                    |
+-----------------------------------------------------------------------------------------------------+
|                                                                                                     |
|  +-------------+    +-------------+    +-------------+    +-------------+                           |
|  |  REQUEST    |    |   RESULT    |    |    ERROR    |    | NOTIFICATION|                           |
|  |-------------|    |-------------|    |-------------|    |-------------|                           |
|  | method      |    | result data |    | code        |    | method      |                           |
|  | params      |    |             |    | message     |    | params      |                           |
|  +-------------+    +-------------+    | data        |    +-------------+                           |
|                                        +-------------+                                              |
+-----------------------------------------------------------------------------------------------------+

+-----------------------------------------------------------------------------------------------------+
|                                 CONNECTION LIFECYCLE                                                |
+-----------------------------------------------------------------------------------------------------+
|                                                                                                     |
|    +--------------+        +-----------------+        +----------------+       +------------+       |
|    | INITIALIZATION|  -->   | MESSAGE EXCHANGE |  -->   | ERROR HANDLING |  -->  | TERMINATION|       |
|    +--------------+        +-----------------+        +----------------+       +------------+       |
|    | 1. initialize |        | Request-Response |        | Error codes    |       | close()    |       |
|    | 2. initialized|        | Notifications    |        | Error handlers |       | disconnect |       |
|    +--------------+        +-----------------+        +----------------+       +------------+       |
|                                                                                                     |
+-----------------------------------------------------------------------------------------------------+

+-----------------------------------------------------------------------------------------------------+
|                                    BEST PRACTICES                                                   |
+-----------------------------------------------------------------------------------------------------+
|                                                                                                     |
|  +------------------+    +------------------+    +------------------+    +------------------+       |
|  | TRANSPORT SELECT |    | MESSAGE HANDLING |    |     SECURITY     |    | DEBUG & MONITOR  |       |
|  |------------------|    |------------------|    |------------------|    |------------------|       |
|  | - Local: stdio   |    | - Validate input |    | - TLS            |    | - Logging        |       |
|  | - Remote: SSE    |    | - Type safety    |    | - Auth           |    | - Diagnostics    |       |
|  |                  |    | - Error handling |    | - Rate limiting  |    | - Testing        |       |
|  +------------------+    +------------------+    +------------------+    +------------------+       |
|                                                                                                     |
+-----------------------------------------------------------------------------------------------------+
```